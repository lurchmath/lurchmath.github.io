<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Lurch core classes: formula.js</title>
    
      <link type="text/css" rel="stylesheet" href="styles/vendor/prism-default.css">
    
    <link type="text/css" rel="stylesheet" href="styles/styles.css">
    
    
    <style>
      :root {
      
      
        --nav-width: 335px;
      
      }
    </style>
    
</head>
<body>

<header class="layout-header">
  
  <h1>
    <a href="./index.html">
      Lurch core classes
    </a>
  </h1>
  <nav class="layout-nav">
    <ul><li class="nav-heading">Tutorials</li><li class="nav-item"><a href="tutorial-Connections among LCs.html">Connections among LCs</a></li><li class="nav-item"><a href="tutorial-Constructing LCs.html">Constructing LCs</a></li><li class="nav-item"><a href="tutorial-Free and bound variables.html">Free and bound variables</a></li><li class="nav-item"><a href="tutorial-LC tree hierarchies.html">LC tree hierarchies</a></li><li class="nav-item"><a href="tutorial-Lurch Node REPL.html">Lurch Node REPL</a></li><li class="nav-item"><a href="tutorial-Methods in each LC subclass.html">Methods in each LC subclass</a></li><li class="nav-item"><a href="tutorial-Pattern matching.html">Pattern matching</a></li><li class="nav-item"><a href="tutorial-Serialization and attributes of LCs.html">Serialization and attributes of LCs</a></li></ul><ul><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class" title="class">C</span><span class="nav-item-name is-class"><a href="Application.html">Application</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Application.html#operands">operands</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Application.html#operator">operator</a></span></li><li class="nav-heading"><span class="nav-item-type type-class" title="class">C</span><span class="nav-item-name is-class"><a href="Array.html">Array</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Array.html#last">last</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Array.html#without">without</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Array.html#.range">range</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Array.html#.seq">seq</a></span></li><li class="nav-heading"><span class="nav-item-type type-class" title="class">C</span><span class="nav-item-name is-class"><a href="BindingEnvironment.html">BindingEnvironment</a></span></li><li class="nav-heading"><span class="nav-item-type type-class" title="class">C</span><span class="nav-item-name is-class"><a href="BindingExpression.html">BindingExpression</a></span></li><li class="nav-heading"><span class="nav-item-type type-class" title="class">C</span><span class="nav-item-name is-class"><a href="Connection.html">Connection</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="Connection.html#IDs">IDs</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Connection.html#attr">attr</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Connection.html#clearAttributes">clearAttributes</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Connection.html#getAttribute">getAttribute</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Connection.html#getAttributeKeys">getAttributeKeys</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Connection.html#handleIDChange">handleIDChange</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Connection.html#hasAttribute">hasAttribute</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Connection.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Connection.html#setAttribute">setAttribute</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Connection.html#source">source</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Connection.html#target">target</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Connection.html#.create">create</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Connection.html#.transferConnections">transferConnections</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Connection.html#.withID">withID</a></span></li><li class="nav-heading"><span class="nav-item-type type-class" title="class">C</span><span class="nav-item-name is-class"><a href="Constraint.html">Constraint</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="Constraint.html#expression">expression</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="Constraint.html#pattern">pattern</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Constraint.html#afterSubstituting">afterSubstituting</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Constraint.html#children">children</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Constraint.html#complexity">complexity</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Constraint.html#complexityName">complexityName</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Constraint.html#copy">copy</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Constraint.html#deBruijnDecode">deBruijnDecode</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Constraint.html#deBruijnEncode">deBruijnEncode</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Constraint.html#equals">equals</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Constraint.html#isAnInstantiation">isAnInstantiation</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Constraint.html#toString">toString</a></span></li><li class="nav-heading"><span class="nav-item-type type-class" title="class">C</span><span class="nav-item-name is-class"><a href="Declaration.html">Declaration</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Declaration.html#body">body</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Declaration.html#copy">copy</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Declaration.html#removeBody">removeBody</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Declaration.html#setBody">setBody</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Declaration.html#symbols">symbols</a></span></li><li class="nav-heading"><span class="nav-item-type type-class" title="class">C</span><span class="nav-item-name is-class"><a href="Environment.html">Environment</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Environment.html#conclusions">conclusions</a></span></li><li class="nav-heading"><span class="nav-item-type type-class" title="class">C</span><span class="nav-item-name is-class"><a href="EventTarget.html">EventTarget</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="EventTarget.html#emit">emit</a></span></li><li class="nav-heading"><span class="nav-item-type type-class" title="class">C</span><span class="nav-item-name is-class"><a href="Expression.html">Expression</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Expression.html#getOutermost">getOutermost</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Expression.html#isAConclusionIn">isAConclusionIn</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Expression.html#isOutermost">isOutermost</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Expression.html#value">value</a></span></li><li class="nav-heading"><span class="nav-item-type type-class" title="class">C</span><span class="nav-item-name is-class"><a href="LogicConcept.html">LogicConcept</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="LogicConcept.html#conditionalForm">conditionalForm</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="LogicConcept.html#enableFeedback">enableFeedback</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="LogicConcept.html#feedback">feedback</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="LogicConcept.html#hasOnlyClaimAncestors">hasOnlyClaimAncestors</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="LogicConcept.html#markDirty">markDirty</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="LogicConcept.html#origin">origin</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="LogicConcept.html#toPutdown">toPutdown</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="LogicConcept.html#.fromPutdown">fromPutdown</a></span></li><li class="nav-heading"><span class="nav-item-type type-class" title="class">C</span><span class="nav-item-name is-class"><a href="Map.html">Map</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Map.html#deepCopy">deepCopy</a></span></li><li class="nav-heading"><span class="nav-item-type type-class" title="class">C</span><span class="nav-item-name is-class"><a href="MathConcept.html">MathConcept</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="MathConcept.html#IDs">IDs</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="MathConcept.html#className">className</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="MathConcept.html#subclasses">subclasses</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#ID">ID</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#accessibles">accessibles</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#accessiblesIterator">accessiblesIterator</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#address">address</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#allButFirstChild">allButFirstChild</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#allButLastChild">allButLastChild</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#ancestors">ancestors</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#ancestorsIterator">ancestorsIterator</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#ancestorsSatisfying">ancestorsSatisfying</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#asA">asA</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#attr">attr</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#binds">binds</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#changeID">changeID</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#child">child</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#children">children</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#childrenSatisfying">childrenSatisfying</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#clearAttributes">clearAttributes</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#clearIDs">clearIDs</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#connectTo">connectTo</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#copy">copy</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#copyAttributesFrom">copyAttributesFrom</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#descendantsIterator">descendantsIterator</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#descendantsSatisfying">descendantsSatisfying</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#equals">equals</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#feedback">feedback</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#firstChild">firstChild</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#freeSymbolNames">freeSymbolNames</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#getAttribute">getAttribute</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#getAttributeKeys">getAttributeKeys</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#getConnectionIDs">getConnectionIDs</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#getConnectionIDsIn">getConnectionIDsIn</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#getConnectionIDsOut">getConnectionIDsOut</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#getConnections">getConnections</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#getConnectionsIn">getConnectionsIn</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#getConnectionsOut">getConnectionsOut</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#hasAncestorSatisfying">hasAncestorSatisfying</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#hasAttribute">hasAttribute</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#hasChildSatisfying">hasChildSatisfying</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#hasDescendantSatisfying">hasDescendantSatisfying</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#idIsTracked">idIsTracked</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#index">index</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#indexInParent">indexInParent</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#insertChild">insertChild</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#interpret">interpret</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#interpretation">interpretation</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#isA">isA</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#isAccessibleTo">isAccessibleTo</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#isAtomic">isAtomic</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#isDirty">isDirty</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#isEarlierThan">isEarlierThan</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#isFree">isFree</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#isFreeToReplace">isFreeToReplace</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#isInTheScopeOf">isInTheScopeOf</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#isLaterThan">isLaterThan</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#lastChild">lastChild</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#makeIntoA">makeIntoA</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#markDirty">markDirty</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#nextInTree">nextInTree</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#nextSibling">nextSibling</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#numChildren">numChildren</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#occursFree">occursFree</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#parent">parent</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#popChild">popChild</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#preOrderIterator">preOrderIterator</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#preOrderTraversal">preOrderTraversal</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#previousInTree">previousInTree</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#previousSibling">previousSibling</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#pushChild">pushChild</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#removeChild">removeChild</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#removeConnections">removeConnections</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#replaceFree">replaceFree</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#replaceWith">replaceWith</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#scope">scope</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#scopeIterator">scopeIterator</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#setAttribute">setAttribute</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#setChildren">setChildren</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#setID">setID</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#shiftChild">shiftChild</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#toJSON">toJSON</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#toSmackdown">toSmackdown</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#toString">toString</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#trackConnections">trackConnections</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#trackIDs">trackIDs</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#transferConnectionsTo">transferConnectionsTo</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#unmakeIntoA">unmakeIntoA</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#unshiftChild">unshiftChild</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#untrackIDs">untrackIDs</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#.addSubclass">addSubclass</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#.feedback">feedback</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#.fromJSON">fromJSON</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#.fromSmackdown">fromSmackdown</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#.instanceWithID">instanceWithID</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="MathConcept.html#.typeAttributeKey">typeAttributeKey</a></span></li><li class="nav-item"><span class="nav-item-type type-event" title="event">E</span><span class="nav-item-name is-event"><a href="MathConcept.html#event:wasChanged">wasChanged</a></span></li><li class="nav-item"><span class="nav-item-type type-event" title="event">E</span><span class="nav-item-name is-event"><a href="MathConcept.html#event:wasInserted">wasInserted</a></span></li><li class="nav-item"><span class="nav-item-type type-event" title="event">E</span><span class="nav-item-name is-event"><a href="MathConcept.html#event:wasRemoved">wasRemoved</a></span></li><li class="nav-item"><span class="nav-item-type type-event" title="event">E</span><span class="nav-item-name is-event"><a href="MathConcept.html#event:willBeChanged">willBeChanged</a></span></li><li class="nav-item"><span class="nav-item-type type-event" title="event">E</span><span class="nav-item-name is-event"><a href="MathConcept.html#event:willBeInserted">willBeInserted</a></span></li><li class="nav-item"><span class="nav-item-type type-event" title="event">E</span><span class="nav-item-name is-event"><a href="MathConcept.html#event:willBeRemoved">willBeRemoved</a></span></li><li class="nav-heading"><span class="nav-item-type type-class" title="class">C</span><span class="nav-item-name is-class"><a href="NewSymbolStream.html">NewSymbolStream</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="NewSymbolStream.html#avoid">avoid</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="NewSymbolStream.html#copy">copy</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="NewSymbolStream.html#next">next</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="NewSymbolStream.html#nextN">nextN</a></span></li><li class="nav-heading"><span class="nav-item-type type-class" title="class">C</span><span class="nav-item-name is-class"><a href="Problem.html">Problem</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="Problem.html#length">length</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Problem.html#add">add</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Problem.html#afterSubstituting">afterSubstituting</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Problem.html#copy">copy</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Problem.html#empty">empty</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Problem.html#equals">equals</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Problem.html#firstSolution">firstSolution</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Problem.html#isSolvable">isSolvable</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Problem.html#numSolutions">numSolutions</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Problem.html#plus">plus</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Problem.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Problem.html#solutions">solutions</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Problem.html#substitute">substitute</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Problem.html#toString">toString</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Problem.html#without">without</a></span></li><li class="nav-heading"><span class="nav-item-type type-class" title="class">C</span><span class="nav-item-name is-class"><a href="PropositionalForm.html">PropositionalForm</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="PropositionalForm.html#CNF">CNF</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="PropositionalForm.html#isAClassicalTautology">isAClassicalTautology</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="PropositionalForm.html#isAnIntuitionisticTautology">isAnIntuitionisticTautology</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="PropositionalForm.html#isAtomic">isAtomic</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="PropositionalForm.html#isConditional">isConditional</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="PropositionalForm.html#isConstantTrue">isConstantTrue</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="PropositionalForm.html#negatedCNF">negatedCNF</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="PropositionalForm.html#.atomic">atomic</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="PropositionalForm.html#.conditional">conditional</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="PropositionalForm.html#.constantTrue">constantTrue</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="PropositionalForm.html#.fromConclusion">fromConclusion</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="PropositionalForm.html#.fromConclusionsIn">fromConclusionsIn</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="PropositionalForm.html#.sequent">sequent</a></span></li><li class="nav-heading"><span class="nav-item-type type-class" title="class">C</span><span class="nav-item-name is-class"><a href="Sequent.html">Sequent</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="Sequent.html#attributesToKeep">attributesToKeep</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Sequent.html#conclusion">conclusion</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Sequent.html#copy">copy</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Sequent.html#originalConclusion">originalConclusion</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Sequent.html#originalPremises">originalPremises</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Sequent.html#premises">premises</a></span></li><li class="nav-heading"><span class="nav-item-type type-class" title="class">C</span><span class="nav-item-name is-class"><a href="Set.html">Set</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Set.html#difference">difference</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Set.html#equals">equals</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Set.html#intersection">intersection</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Set.html#isSubset">isSubset</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Set.html#isSuperset">isSuperset</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Set.html#subset">subset</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Set.html#symmetricDifference">symmetricDifference</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Set.html#union">union</a></span></li><li class="nav-heading"><span class="nav-item-type type-class" title="class">C</span><span class="nav-item-name is-class"><a href="Solution.html">Solution</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Solution.html#add">add</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Solution.html#afterSubstituting">afterSubstituting</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Solution.html#complete">complete</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Solution.html#copy">copy</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Solution.html#domain">domain</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Solution.html#equals">equals</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Solution.html#get">get</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Solution.html#plus">plus</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Solution.html#restrict">restrict</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Solution.html#restricted">restricted</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Solution.html#substitute">substitute</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Solution.html#toString">toString</a></span></li><li class="nav-heading"><span class="nav-item-type type-class" title="class">C</span><span class="nav-item-name is-class"><a href="SourceMap.html">SourceMap</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="SourceMap.html#dataForMarker">dataForMarker</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="SourceMap.html#modified">modified</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="SourceMap.html#modifiedLineAndColumn">modifiedLineAndColumn</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="SourceMap.html#modifiedPosition">modifiedPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="SourceMap.html#modify">modify</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="SourceMap.html#nextMarker">nextMarker</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="SourceMap.html#nextModificationPosition">nextModificationPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="SourceMap.html#source">source</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="SourceMap.html#sourceLineAndColumn">sourceLineAndColumn</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="SourceMap.html#sourcePosition">sourcePosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="SourceMap.html#.debugCode">debugCode</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="SourceMap.html#.isMarker">isMarker</a></span></li><li class="nav-heading"><span class="nav-item-type type-class" title="class">C</span><span class="nav-item-name is-class"><a href="Substitution.html">Substitution</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="Substitution.html#expression">expression</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="Substitution.html#metavariable">metavariable</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Substitution.html#afterSubstituting">afterSubstituting</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Substitution.html#appliedTo">appliedTo</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Substitution.html#applyTo">applyTo</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Substitution.html#copy">copy</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Substitution.html#deBruijnDecode">deBruijnDecode</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Substitution.html#deBruijnEncode">deBruijnEncode</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Substitution.html#equals">equals</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Substitution.html#metavariableNames">metavariableNames</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Substitution.html#substitute">substitute</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Substitution.html#toString">toString</a></span></li><li class="nav-heading"><span class="nav-item-type type-class" title="class">C</span><span class="nav-item-name is-class"><a href="Symbol.html">Symbol</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Symbol.html#insertChild">insertChild</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Symbol.html#text">text</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Symbol.html#toString">toString</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Symbol.html#value">value</a></span></li></ul><ul><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module" title="module">M</span><span class="nav-item-name is-module"><a href="module-ExpressionFunctions.html">ExpressionFunctions</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-ExpressionFunctions.html#.alphaEquivalent">alphaEquivalent</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-ExpressionFunctions.html#.alphaRenamed">alphaRenamed</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-ExpressionFunctions.html#.applicationEF">applicationEF</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-ExpressionFunctions.html#.applyEF">applyEF</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-ExpressionFunctions.html#.arityOfEF">arityOfEF</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-ExpressionFunctions.html#.betaReduce">betaReduce</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-ExpressionFunctions.html#.bodyOfEF">bodyOfEF</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-ExpressionFunctions.html#.canBetaReduce">canBetaReduce</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-ExpressionFunctions.html#.constantEF">constantEF</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-ExpressionFunctions.html#.expressionFunction">expressionFunction</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-ExpressionFunctions.html#.expressionFunctionApplication">expressionFunctionApplication</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-ExpressionFunctions.html#.fullBetaReduce">fullBetaReduce</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-ExpressionFunctions.html#.isAnEF">isAnEF</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-ExpressionFunctions.html#.isAnEFA">isAnEFA</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-ExpressionFunctions.html#.newEF">newEF</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-ExpressionFunctions.html#.newEFA">newEFA</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-ExpressionFunctions.html#.parametersOfEF">parametersOfEF</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-ExpressionFunctions.html#.projectionEF">projectionEF</a></span></li><li class="nav-heading"><span class="nav-item-type type-module" title="module">M</span><span class="nav-item-name is-module"><a href="module-Matching.html">Matching</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Matching.html#.allInstantiations">allInstantiations</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Matching.html#.allOptionalInstantiations">allOptionalInstantiations</a></span></li><li class="nav-heading"><span class="nav-item-type type-module" title="module">M</span><span class="nav-item-name is-module"><a href="module-Metavariables.html">Metavariables</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-Metavariables.html#.metavariable">metavariable</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Metavariables.html#.containsAMetavariable">containsAMetavariable</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Metavariables.html#.metavariableNamesIn">metavariableNamesIn</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Metavariables.html#.metavariablesIn">metavariablesIn</a></span></li><li class="nav-heading"><span class="nav-item-type type-module" title="module">M</span><span class="nav-item-name is-module"><a href="module-Scoping.html">Scoping</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Scoping.html#.addImplicitDeclaration">addImplicitDeclaration</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Scoping.html#.addScopeError">addScopeError</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Scoping.html#.clearImplicitDeclarations">clearImplicitDeclarations</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Scoping.html#.clearScopeErrors">clearScopeErrors</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Scoping.html#.declareGlobal">declareGlobal</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Scoping.html#.declareInAncestor">declareInAncestor</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Scoping.html#.declareWhenSeen">declareWhenSeen</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Scoping.html#.doNotDeclare">doNotDeclare</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Scoping.html#.implicitDeclarations">implicitDeclarations</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Scoping.html#.removeImplicitDeclaration">removeImplicitDeclaration</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Scoping.html#.scopeErrors">scopeErrors</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Scoping.html#.validate">validate</a></span></li><li class="nav-heading"><span class="nav-item-type type-module" title="module">M</span><span class="nav-item-name is-module"><a href="module-Validation.html">Validation</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Validation.html#.clearOptions">clearOptions</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Validation.html#.clearResult">clearResult</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Validation.html#.functionToTool">functionToTool</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Validation.html#.getOptions">getOptions</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Validation.html#.installTool">installTool</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Validation.html#.installedTool">installedTool</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Validation.html#.installedToolNames">installedToolNames</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Validation.html#.result">result</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Validation.html#.setOptions">setOptions</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Validation.html#.setResult">setResult</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-Validation.html#.validate">validate</a></span></li><li class="nav-heading"><span class="nav-item-type type-module" title="module">M</span><span class="nav-item-name is-module"><a href="module-deBruijn.html">deBruijn</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-deBruijn.html#.deBruijn">deBruijn</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-deBruijn.html#.free">free</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-deBruijn.html#.isEncodedBinding">isEncodedBinding</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="module-deBruijn.html#.numberOfOccurrences">numberOfOccurrences</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-deBruijn.html#.adjustIndices">adjustIndices</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-deBruijn.html#.decodeExpression">decodeExpression</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-deBruijn.html#.decodeSymbol">decodeSymbol</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-deBruijn.html#.encodeExpression">encodeExpression</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-deBruijn.html#.encodeSymbol">encodeSymbol</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-deBruijn.html#.encodedIndices">encodedIndices</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="module-deBruijn.html#.equal">equal</a></span></li></ul><ul><li class="nav-heading">Namespaces</li><li class="nav-heading"><span class="nav-item-type type-namespace" title="namespace">N</span><span class="nav-item-name is-namespace"><a href="BindingInterface.html">BindingInterface</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="BindingInterface.html#.addTo">addTo</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="BindingInterface.html#.allAreSymbols">allAreSymbols</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="BindingInterface.html#.binds">binds</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="BindingInterface.html#.body">body</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="BindingInterface.html#.boundSymbolNames">boundSymbolNames</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="BindingInterface.html#.boundSymbols">boundSymbols</a></span></li><li class="nav-heading"><span class="nav-item-type type-namespace" title="namespace">N</span><span class="nav-item-name is-namespace"><a href="CNF.html">CNF</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="CNF.html#.and">and</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="CNF.html#.constantFalse">constantFalse</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="CNF.html#.constantTrue">constantTrue</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="CNF.html#.isSatisfiable">isSatisfiable</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="CNF.html#.or">or</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="CNF.html#.proposition">proposition</a></span></li><li class="nav-heading"><span class="nav-item-type type-namespace" title="namespace">N</span><span class="nav-item-name is-namespace"><a href="Database.html">Database</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="Database.html#.filterByMetadata">filterByMetadata</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="Database.html#.getCode">getCode</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="Database.html#.getCodeWithoutIncludes">getCodeWithoutIncludes</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="Database.html#.getMetadata">getMetadata</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="Database.html#.getObject">getObject</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="Database.html#.getObjects">getObjects</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="Database.html#.keys">keys</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="Database.html#.keysPaths">keysPaths</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="Database.html#.keysStartingWith">keysStartingWith</a></span></li><li class="nav-heading"><span class="nav-item-type type-namespace" title="namespace">N</span><span class="nav-item-name is-namespace"><a href="Formula.html">Formula</a></span></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="Formula.html#.cachedInstantiation">cachedInstantiation</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Formula.html#.addCachedInstantiation">addCachedInstantiation</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Formula.html#.allCachedInstantiations">allCachedInstantiations</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Formula.html#.allPossibleInstantiations">allPossibleInstantiations</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Formula.html#.clearCachedInstantiations">clearCachedInstantiations</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Formula.html#.domain">domain</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Formula.html#.from">from</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Formula.html#.hasDeclarationCapture">hasDeclarationCapture</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Formula.html#.instantiate">instantiate</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="Formula.html#.possibleSufficientInstantiations">possibleSufficientInstantiations</a></span></li><li class="nav-heading"><span class="nav-item-type type-namespace" title="namespace">N</span><span class="nav-item-name is-namespace"><a href="JSON.html">JSON</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="JSON.html#.copy">copy</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="JSON.html#.equals">equals</a></span></li><li class="nav-heading"><span class="nav-item-type type-namespace" title="namespace">N</span><span class="nav-item-name is-namespace"><a href="ValidationTools.html">ValidationTools</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="ValidationTools.html#.CASValidator">CASValidator</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="ValidationTools.html#.arithmeticValidator">arithmeticValidator</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="ValidationTools.html#.classicalPropositionalValidator">classicalPropositionalValidator</a></span></li><li class="nav-item"><span class="nav-item-type type-function" title="function">F</span><span class="nav-item-name is-function"><a href="ValidationTools.html#.intuitionisticPropositionalValidator">intuitionisticPropositionalValidator</a></span></li></ul><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-member" title="member">M</span><span class="nav-item-name is-member"><a href="global.html#predictableStringify">predictableStringify</a></span></li>
  </nav>
</header>


<main class="layout-main  layout-content--source">
  <div class="container">
    <p class="page-kind">source</p>
    <h1 class="page-title">formula.js</h1>
    



    

<section>
    <article>
        <pre id="source" class="source-page line-numbers"><code class="language-js">
/**
 * A formula is a {@link LogicConcept LogicConcept} that includes symbols
 * intended to be used for substitution, that is, what
 * {@link module:Matching the Matching module} calls
 * {@link module:Matching.metavariable metavariables}.  This namespace
 * provides functions for dealing with formulas, including
 * {@link Formula.from converting} a {@link LogicConcept LogicConcept} into a
 * formula, computing the {@link Formula.domain domain} of a formula, and
 * {@link Formula.instantiate instantiating} a formula.
 * 
 * Import this namespace with code such as
 * `import Formula from './formula.js'` and then make calls such as
 * `Formula.domain( myLC )`.
 * 
 * @namespace Formula
 */

import { MathConcept } from './math-concept.js'
import { LogicConcept } from './logic-concept.js'
import { BindingEnvironment } from './binding-environment.js'
import { BindingExpression } from './binding-expression.js'
import { Declaration } from './declaration.js'
import { Expression } from './expression.js'
import { Environment } from './environment.js'
import { Symbol as LurchSymbol } from './symbol.js'
import Matching from './matching.js'

/**
 * A {@link LogicConcept LogicConcept} can be converted into a formula by
 * replacing any subset of its {@link Symbol Symbols} with metavariables.
 * Recall that a metavariable can be any symbol, but with
 * {@link module:Matching.metavariable a specific attribute} set to "true."
 * 
 * Which {@link Symbol Symbols} should be converted into metavariables?  Any
 * one that is not in the scope of a {@link Declaration Declaration} of that
 * same {@link Symbol}.  For example, if we consider the {@link LogicConcept}
 * indicated by the {@link LogicConcept.fromPutdown putdown notation}
 * `{ :(= a b) (= b a) }` and we assume it is in the scope of a
 * {@link Declaration} of the `=` {@link Symbol}, but not of the `a` or `b`
 * {@link Symbol Symbols}, then converting `{ :(= a b) (= b a) }` to a formula
 * would produce a copy in which each instance of `a` and `b` have had their
 * metavariable attribute set to "true" (via a call to the
 * {@link MathConcept#makeIntoA makeIntoA()} member).
 * 
 * The exception is that bound variables are never marked as metavariables.
 * 
 * @param {LogicConcept} LC - the {@link LogicConcept LogicConcept} to convert
 *   into a formula
 * @param {boolean} [inPlace] - if `true`, the metavariables will be attributed in
 * `LC` itself, and the resulting modified `LC` is returned.  If `false`, it will
 * attribute and return a separate copy of `LC`, leaving the original unchanged.  
 * @returns {LogicConcept} a structural copy of `LC`, except with the relevant
 *   {@link Symbol Symbol} atoms converted into
 *   {@link module:Matching.metavariable metavariables}
 * @memberof Formula
 * @alias Formula.from
 */
const from = (LC, inPlace=false) => {
    // what symbol names were already declared?
    const declared = new Set( LC.accessibles().filter(
        a => a instanceof Declaration
    ).map( d => d.symbols() ).flat().map( s => s.text() ) )
    // add to that the special symbol for empty declaration bodies
    declared.add( Declaration.emptyBody().text() )
    // and what were bound outside of the LC?
    const bound = new Set( LC.ancestors().filter(
        a => a != LC &amp;&amp; ( a instanceof BindingEnvironment )
    ).map( be => be.boundSymbolNames() ).flat() )
    // make a copy and change all of its undeclared symbols into metavariables
    const result = (inPlace) ? LC : LC.copy()
    result.descendantsSatisfying( d => d instanceof LurchSymbol )
          .filter( s => !declared.has( s.text() ) &amp;&amp; !bound.has( s.text() )
                                                  &amp;&amp; s.isFree() )
          .forEach( s => s.makeIntoA( Matching.metavariable ) )
    // return it
    return result
}

/**
 * Once a {@link LogicConcept LogicConcept} has been {@link Formula.from
 * converted into a formula}, it will have zero or more metavariables.  This
 * function returns the set of names of those metavariables.  If the formula
 * has no metavariables, or if a non-formula {@link LogicConcept LogicConcept}
 * was passed as input, this function will return the empty set.
 * 
 * @param {LogicConcept} formula - the {@link LogicConcept LogicConcept} to
 *   view as a formula, and whose metavariables should be investigated to
 *   compute this function's result
 * @returns {Set} the set of names of {@link Symbol Symbols} in the given
 *   `formula` that appear as a metavariable therein
 * @memberof Formula
 * @alias Formula.domain
 */
const domain = formula =>
    new Set( formula.descendantsSatisfying(
        d => ( d instanceof LurchSymbol ) &amp;&amp; d.isA( Matching.metavariable )
    ).map( metavar => metavar.text() ) )

/**
 * Instantiating a formula means making a copy of that formula and then
 * replacing each metavariable in it with another {@link LogicConcept
 * LogicConcept}, according to some predetermined mapping of metavariable
 * names to {@link LogicConcept LogicConcepts}, called the "instantiation."
 * This function performs exactly that operation, with two exceptions.
 * 
 * First, this function does not check to ensure that the domain of the given
 * `instantiation` matches the {@link Formula.domain domain} of the given
 * `formula`.  If that is important to the caller, they should verify that
 * themselves in advance, using an {@link Set#equals equality check} between
 * the two sets.
 * 
 * Second, this function also applies {@link module:Matching.fullBetaReduce
 * beta reduction} to the result before returning it (if necessary) because
 * the instantiation may have introduced an explicit expression function in a
 * position where it should be applied to its arguments.  Note the warnings in
 * the beta reduction documentation about infinite loops.
 * 
 * @param {LogicConcept} formula - the {@link LogicConcept LogicConcept} to
 *   instantiate with the given `instantiation`
 * @param {Substitution|Solution|Object|Map} instantiation - either a
 *   {@link Substitution Substitution} instance (which describes a single
 *   metavariable's replacement) or a {@link Solution Solution} instance
 *   (which describes the substitution of zero or more metavariables) or a
 *   JavaScript Object or Map (which should map metavariable names to the
 *   desired instantiations) to be used as the function to apply to each
 *   metavariable in the `formula`
 * @param {String[]} preserve - the list of attributes to preserve while doing
 *   the instantiation.  Any metavariable having these attributes will have the
 *   values of those attributes copied over to its instantiation.  All other
 *   attributes of the metavariable (including, typically, the fact that it is a
 *   metavariable) will be lost during the instantiation.  This defaults to the
 *   list containing just one entry, the "given" type attribute flag.
 * @memberof Formula
 * @alias Formula.instantiate
 */
const instantiate = (
    formula, instantiation,
    preserve = [ MathConcept.typeAttributeKey( 'given' ) ]
) => {
    // handle the atomic case, where .replaceWith() would fail, and where we
    // don't need to check any restrictions on the parent, because there is no
    // parent in this case (since we're making a copy).  Furthermore, in this
    // case, we cannot possibly have created a case of
    // ("LDE EFA" ("LDE lambda" ...) ...), so we do not beta-reduce.
    if ( ( formula instanceof LurchSymbol )
      &amp;&amp; formula.isA( Matching.metavariable ) ) {
        const result = lookup( instantiation, formula )
        preserve.forEach( attrKey => {
            if ( formula.hasAttribute( attrKey ) )
                result.setAttribute( attrKey,
                    JSON.copy( formula.getAttribute( attrKey ) ) )
        } )
        return result
    }
    // handle the usual case, where we may have multiple substitutions to make
    // and since each one is inside a parent, that may bring restrictions.
    const result = formula.copy()
    result.descendantsSatisfying(
        d => ( d instanceof LurchSymbol ) &amp;&amp; d.isA( Matching.metavariable )
    ).forEach( metavar =>
        replaceIfPossible( metavar, lookup( instantiation, metavar ), preserve )
    )
    // if there are any expression function applications, try beta reducing.
    if ( result instanceof Expression )
        return betaIfNeeded( result )
    result.descendantsSatisfying(
        d => ( d instanceof Expression ) &amp;&amp; d.isOutermost()
    ).forEach( d => d.replaceWith( betaIfNeeded( d ) ) )
    return result
}

/**
 * The concept of variable capture in a quantifier (or, more generically, in a
 * {@link BindingExpression}) is a well-known one, and is also documented
 * in functions such as {@link MathConcept#isFree this one}.  But
 * {@link Declaration Declarations} function similarly to bindings, except their
 * scope spans multiple expressions in the same (or inner) environments.  So we
 * can consider a secondary type of symbol capture, one in which we substitute
 * into an expression $E$ in the scope of a declaration $D$, and doing so
 * inserts an instance of a symbol $s$ that is free in $E$ but is declared by
 * $D$.  This function checks to see whether that would happen if we applied an
 * instantiation to a formula.
 * 
 * For example, if we create a formula from the putdown notation
 * `{ :[x] (+ a 1) }`, with both `x` and `a` as metavariables, we could imagine
 * an instantiation of `a` with the expression `(* x 2)`.  No capture would
 * occur from the point of view of binding expressions, but capture would occur
 * from the point of view of the declaration of `x` at the start of the
 * environment, which functions conceptually like a binding.  This function
 * would return true in such a case, because capture of this type would occur.
 * 
 * Note that this function does *not* report on capture of the *other* type.
 * That is, it may be the case that, for some expression `E` inside the formula,
 * if we asked `E.isFreeToReplace(a,b)` where `b` is `(* x 2)`, we would get
 * false, but this function returns true, because it's not checking for capture
 * inside of expressions by a {@link BindingExpression}, but rather it is
 * checking only for capture that happens due to a declaration.
 * @memberof Formula
 * @alias Formula.hasDeclarationCapture
 */
const hasDeclarationCapture = ( formula, instantiation ) => {
    const dbg = foo => foo.toPutdown().replace( / \+\{"_type_LDE MV"\:true\}\n/g, '_' )
    // console.log( 'Formula: ' + dbg( formula ) )
    // console.log( 'Instantiation:' )
    // Object.keys( instantiation ).map( key =>
    //     console.log( `\t${key} => ${dbg(instantiation[key])}` ) )
    const whatMightGetCaptured = subIntoThis => {
        const result = [ ...new Set( subIntoThis.descendantsSatisfying(
            d => ( d instanceof LurchSymbol ) &amp;&amp; d.isA( Matching.metavariable )
        ) ) ].map( mv => {
            const image = lookup( instantiation, mv )
            return image == mv ? [ ] :
                image.freeSymbolNames().map( sym => [ mv.text(), sym ] )
        } ).flat()
        // console.log( 'In ' + dbg(subIntoThis) + ', possible captures are: '
        //     + result.join( ' ; ' ) )
        return result
    }
    const expressionsIn = target =>
        target instanceof Expression ? [ target ] :
        target instanceof Array ? target.map( expressionsIn ).flat() :
        expressionsIn( target.children() )
    const expressionScope = target =>
        expressionsIn( target.scope().filter( LC =>
            ( LC instanceof Expression ) &amp;&amp; LC.isOutermost() ) )
    return formula.descendantsSatisfying(
        d => d instanceof Declaration
    ).some( d => {
        const declaredNames = d.symbols().map( s => s.text() )
        const declaredImages = d.symbols().map(
            s => lookup( instantiation, s ).text() )
        // console.log( 'Ignore: ' + declaredNames )
        // console.log( 'Seek:   ' + declaredImages )
        return expressionScope( d ).some( expr =>
            whatMightGetCaptured( expr ).some( data =>
                !declaredNames.includes( data[0] )
             &amp;&amp; declaredImages.includes( data[1] ) ) )
    } )
}

// Helper function:  Look up a given metavariable in a given instantiation,
// whether that instantiation is a Solution, a Substitution, a Map, or an
// Object, and return a copy of the image, if there is one.
const lookup = ( instantiation, metavar ) => {
    if ( instantiation instanceof Matching.Substitution )
        return instantiation.metavariable.equals( metavar ) ?
            instantiation.expression.copy() : metavar
    if ( instantiation instanceof Matching.Solution ) {
        const mapsTo = instantiation.get( metavar )
        return mapsTo ? mapsTo.copy() : metavar
    }
    if ( instantiation instanceof Map ) {
        if ( !instantiation.has( metavar.text() ) ) return metavar
        const mapsTo = instantiation.get( metavar.text() )
        return mapsTo instanceof LogicConcept ? mapsTo.copy() : metavar
    }
    if ( instantiation instanceof Object ) {
        if ( !instantiation.hasOwnProperty( metavar.text() ) ) return metavar
        const mapsTo = instantiation[metavar.text()]
        return mapsTo instanceof LogicConcept ? mapsTo.copy() : metavar
    }
    throw new Error( `Invalid instantiation: ${instantiation}` )
}

// Helper function:  Check whether it's acceptable to call x.replaceWith( y ),
// in the sense that the resulting LogicConcept hierarchy would still be valid
// (only symbols are bound, no environments inside expressions, etc.).
// The "preserve" attribute is documented above, in instantiate().
const replaceIfPossible = ( target, replacement, preserve ) => {
    const parent = target.parent()
    // bound symbols must be symbols, not anything else
    if ( ( ( parent instanceof BindingEnvironment )
        || ( parent instanceof BindingExpression ) )
      &amp;&amp; !( replacement instanceof LurchSymbol )
      &amp;&amp; ( target != parent.body() ) )
        throw new Error( 'Cannot replace a bound symbol with a non-symbol' )
    // declared symbols must be symbols, not anything else
    if ( ( parent instanceof Declaration )
      &amp;&amp; !( replacement instanceof LurchSymbol )
      &amp;&amp; parent.symbols().includes( target ) )
        throw new Error( 'Cannot replace a delcared symbol with a non-symbol' )
    // expressions can contain only other expressions
    if ( ( parent instanceof Expression )
      &amp;&amp; !( replacement instanceof Expression ) )
        throw new Error( 'Cannot place a non-expression inside an expression' )
    // no restrictions forbid us, so proceed
    // but note: replacing a declaration's body requires special care
    target.replaceWith( replacement )
    preserve.forEach( attrKey => {
        if ( target.hasAttribute( attrKey ) )
            replacement.setAttribute( attrKey,
                JSON.copy( target.getAttribute( attrKey ) ) )
    } )
}

/**
 * What are all instantiations of the given formula that produce the given
 * candidate?
 * 
 * On the one hand, it may seem like this is a simple application of
 * {@link module:Matching the Matching module}, and this is somewhat true.  The
 * only additional feature provided here is that the formula and its candidate
 * instantiation need not be {@link Expression Expressions}.  If they are not,
 * then they must have isomorphic structure except for any {@link Expression
 * Expressions} inside the two, which will be paired up to construct a matching
 * problem, whose solutions will be returned.
 * 
 * In other words, this function extends matching to support a single pair of
 * inputs that do not need to be {@link Expression Expressions}, and it does
 * exactly what you'd expect in that case.
 * 
 * This function is a generator that yields zero or more ways to instantiation
 * `formula` to produce `candidate`; all possible ways will be enumerated,
 * though it may be that there are no such ways, in which case the enumeration
 * will be empty.
 * 
 * @param {LogicConcept} formula a {@link LogicConcept} that has had
 *   metavariables added to it using {@link Formula.from}
 * @param {LogicConcept} candidate a {@link LogicConcept} that may or may not
 *   be an instantiation of the given `formula`
 * @alias Formula.allPossibleInstantiations
 */
function *allPossibleInstantiations ( formula, candidate ) {
    const problem = problemFromExpressionsWithin( formula, candidate )
    if ( !problem ) return // no isomorphism == no results
    yield* problem.solutions()
}

// Helper function used by allPossibleInstantiations(), above.
// Given two LogicConcepts that are not necessarily expressions, this ensures
// that they have the same structure outside of all expressions, and if so, it
// pairs up the corresponding expressions to produce a matching problem, which
// it then returns.  Otherwise, it returns null (no such pairing possible).
// Third argument is for internal use only; clients provide just the first two.
const problemFromExpressionsWithin = ( formula, candidate, result = null ) => {
    // create a problem if we were not passed one
    if ( result == null ) result = new Matching.Problem()
    // Case 1: The formula is an expression
    if ( formula instanceof Expression ) {
        if ( ( candidate instanceof Expression )
          &amp;&amp; ( formula.isA( 'given' ) == candidate.isA( 'given' ) ) ) {
            // If the candidate is, they pair up in the matching problem
            result.add( formula.copy().unmakeIntoA( 'given' ),
                        candidate.copy().unmakeIntoA( 'given' ) )
            return result
        } else {
            return null // otherwise there can be no possible instantiation
        }
    } else { // Case 2: the formula is not an expression
        if ( ( candidate instanceof Expression )
          || ( formula.constructor.className
            != candidate.constructor.className )
          || ( formula.numChildren() != candidate.numChildren() )
          || ( formula.isA( 'given' ) != candidate.isA( 'given' ) ) ) {
            return null // candidate has diff. structure; no pairing possible
        } else {
            // Candidate has the same shape; proceed recursively
            for ( let i = 0 ; i &lt; formula.numChildren() ; i++ ) {
                result = problemFromExpressionsWithin(
                    formula.child( i ), candidate.child( i ), result )
                if ( !result ) return null // if any child fails, all fails
            }
            return result // return the recursively-produced result
        }
    }
}

// Helper function:  Beta reduce an Expression only if necessary.
const betaIfNeeded = expr => Matching.fullBetaReduce( expr, false )

/**
 * To facilitate marking some {@link LogicConcept LogicConcepts} as cached
 * instantiations of formulas, we declare a string constant that can be used
 * with the {@link MathConcept#isA isA()} and {@link MathConcept#asA asA()} and
 * {@link MathConcept#makeIntoA makeIntoA()} functions in the
 * {@link MathConcept MathConcept} class.
 * 
 * This is used when we have a formula `F` and the inferences done in the scope
 * of that formula cite the formula and create instantiations of it.  Some of
 * our algorithms then insert those instantiations as next siblings following
 * `F` so that they are accessible at any location at which `F` is accessible.
 * But in order to distinguish those algorithmically-created instantiations
 * from content that was authored by the user, we mark algorithmically-created
 * instantiations with an attribute.  Specifically, for such an instantiation
 * `I`, we would call `I.makeIntoA( cachedInstantiation )`, and can then test
 * that later with `I.isA( cachedInstantiation )`.
 * 
 * @see {@link Formula.addCachedInstantiation addCachedInstantiation()}
 * @see {@link Formula.allCachedInstantiations allCachedInstantiations()}
 * @see {@link Formula.clearCachedInstantiations clearCachedInstantiations()}
 * @alias Formula.cachedInstantiation
 */
const cachedInstantiation = 'LDE CI'

/**
 * As described in {@link Formula.cachedInstantiation this documentation}, we
 * can insert after any formula instantiations of it.  This function adds a new
 * instantiation to that cache.  It does not first check to be sure that the
 * given instantiation is actually an instantiation of the given formula; the
 * client is in charge of ensuring that.  This function inserts the given
 * instantiation at the end of the given formula's instantiation cache and also
 * marks it with {@link Formula.cachedInstantiation the appropriate attribute}
 * so that it can be clearly identified as part of the cache.
 * 
 * If the formula has no parent, it can have no siblings, and thus this
 * function cannot do its job and will instead throw an error.
 * 
 * @param {LogicConcept} formula add a cached instantiation of this formula
 * @param {LogicConcept} instantiation the instantiation to add to the cache
 * @see {@link Formula.allCachedInstantiations allCachedInstantiations()}
 * @see {@link Formula.clearCachedInstantiations clearCachedInstantiations()}
 * @alias Formula.addCachedInstantiation
 */
const addCachedInstantiation = ( formula, instantiation ) => {
    if ( !formula.parent() )
        throw new Error(
            'Cannot insert cached instantiation: formula has no parent' )
    const existing = allCachedInstantiations( formula )
    const insertAfter = existing.length > 0 ? existing.last() : formula
    insertAfter.parent().insertChild(
        instantiation, insertAfter.indexInParent() + 1 )
    instantiation.makeIntoA( cachedInstantiation )
}

/**
 * As described in {@link Formula.cachedInstantiation this documentation}, we
 * can insert after any formula instantiations of it.  The sequence of next
 * siblings after a formula that have been marked as instantiations of it
 * (using {@link Formula.cachedInstantiation this constant}) are that formula's
 * instantiation cache.  This function returns that cache as a JavaScript
 * array, in the same order that the siblings appear following the formula.  It
 * may have zero or more entries, but will always be an array.
 * 
 * If the given formula has no parent, it will have no siblings and thus no
 * instantiation cache, and this function will return an empty array.
 * 
 * @param {LogicConcept} formula the formula whose cache should be computed
 * @returns {LogicConcept[]} the array of instantiations cached for the given
 *   formula
 * @see {@link Formula.addCachedInstantiation addCachedInstantiation()}
 * @see {@link Formula.clearCachedInstantiations clearCachedInstantiations()}
 * @alias Formula.allCachedInstantiations
 */
const allCachedInstantiations = formula => {
    const parent = formula.parent()
    if ( !parent ) return [ ]
    const result = [ ]
    const children = parent.children()
    let i = formula.indexInParent() + 1
    while ( i &lt; children.length &amp;&amp; children[i].isA( cachedInstantiation ) )
        result.push( children[i++] )
    return result
}

/**
 * As described in {@link Formula.cachedInstantiation this documentation}, we
 * can insert after any formula instantiations of it.  This function removes
 * all entries from that cache.  Because the cache is defined to be the
 * sequence of siblings following the formula that have the {@link
 * Formula.cachedInstantiation appropriate attribute}, this function actually
 * removes those {@link LogicConcept LogicConcepts} from their parent (which is
 * also the parent of the given formula).
 * 
 * If the given formula has no parent, it will have no instantiation cache, and
 * so this function will do nothing.
 * 
 * @param {LogicConcept} formula add a cached instantiation of this formula
 * @param {LogicConcept} instantiation the instantiation to add to the cache
 * @see {@link Formula.allCachedInstantiations allCachedInstantiations()}
 * @see {@link Formula.addCachedInstantiation addCachedInstantiation()}
 * @alias Formula.clearCachedInstantiations
 */
const clearCachedInstantiations = formula => {
    allCachedInstantiations( formula ).forEach(
        instantiation => instantiation.remove() )
}

// Helper function used by possibleSufficientInstantiations(), below.
// Traverses any given LogicConcept and returns an object of the form
// { positives : [ ... ], negatives : [ ... ] }, where the two arrays are full
// of the outermost expressions in the given LogicConcept, in the same order
// they appear in the tree, but classified by parity.  There is also a "both"
// member in the result, which just concatenates the two arrays.
const classifyByParity = ( LC, parity = 1 ) => {
    // Base case: this is an Expression; classify by the given parity
    if ( LC instanceof Expression ) {
        const claim = LC.copy().unmakeIntoA( 'given' )
        claim.original = LC
        return parity == 1 ?
            { positives : [ claim ], negatives : [ ], both : [ claim ] }
          : { positives : [ ], negatives : [ claim ], both : [ claim ] }
    }
    // Other base case: some type of LC we cannot handle; don't classify it
    const result = { positives : [ ], negatives : [ ], both : [ ] }
    if ( !( LC instanceof Environment ) ) return result
    // Inductive case: recur on children, gather their results, in order
    LC.children().forEach( child => {
        const childResult = classifyByParity( child,
            parity * ( child.isA( 'given' ) ? -1 : 1 ) )
        result.positives = result.positives.concat( childResult.positives )
        result.negatives = result.negatives.concat( childResult.negatives )
        result.both = result.both.concat( childResult.both )
    } )
    return result
}

// Utility function used by possibleSufficientInstantiations(), below.
// Takes a list [ LC_1, ..., LC_n ] of LCs and returns a sublist such that no
// two entries are .equals() with one another.
const duplicateLCsRemoved = listOfLCs => {
    const result = [ ]
    listOfLCs.forEach( LC => {
        if ( !result.some( earlierLC => earlierLC.equals( LC ) ) )
            result.push( LC )
    } )
    return result
}

// Utility function used by possibleSufficientInstantiations(), below.
// Takes a pattern list [ p_1, ..., p_n ] and a list of lists of candidate
// matches, [ L_1, ..., L_n ] (each L_i being a list of LCs) and an index of
// the first optional match.
// Modifies the first two arguments in place and returns a new index of the
// first optional match, ensuring that no p_i.equals( p_j ), but all constraints
// on the same pattern have been united into one list of candidate matches.
const removeDuplicatePatterns = (
    patterns, candidateLists, firstOptionalIndex
) => {
    // Drop any optional patterns that are also required patterns (and thus
    // appearing earlier in the patterns list, as a requirement).
    const requiredPatterns = patterns.slice( 0, firstOptionalIndex )
    for ( let i = patterns.length - 1 ; i >= firstOptionalIndex ; i-- ) {
        if ( requiredPatterns.some(
                required => required.equals( patterns[i] ) ) ) {
            patterns.splice( i, 1 )
            candidateLists.splice( i, 1 )
        }
    }
    // For any two requirements that share the same pattern, merge it into a
    // single requirement for that pattern, with the candidate list being the
    // intersection of the original two candidate lists (since both must match).
    const LCListIntersection = ( LCList1, LCList2 ) =>
        LCList1.filter( LC1 => LCList2.some( LC2 => LC1.equals( LC2 ) ) )
    for ( let i = firstOptionalIndex - 1 ; i >= 0 ; i-- ) {
        const earlierIndex = patterns.slice( 0, i ).findIndex(
            earlierPattern => earlierPattern.equals( patterns[i] ) )
        if ( earlierIndex > -1 ) {
            candidateLists[earlierIndex] = LCListIntersection(
                candidateLists[earlierIndex], candidateLists[i] )
            patterns.splice( i, 1 )
            candidateLists.splice( i, 1 )
            firstOptionalIndex-- // because we removed a required pattern
        }
    }
    // Now do the same thing for optional patterns as well.
    for ( let i = patterns.length - 1 ; i >= firstOptionalIndex ; i-- ) {
        const earlierIndex = patterns.slice( firstOptionalIndex, i ).findIndex(
            earlierPattern => earlierPattern.equals( patterns[i] ) )
        if ( earlierIndex > -1 ) {
            candidateLists[earlierIndex] = LCListIntersection(
                candidateLists[earlierIndex], candidateLists[i] )
            patterns.splice( i, 1 )
            candidateLists.splice( i, 1 )
        }
    }
    // Done--return new firstOptionalIndex
    return firstOptionalIndex
}

// Utility function used by possibleSufficientInstantiations(), below.
// Given a pattern P and a list L of possible instantiations of the pattern,
// this function returns a (typically smaller) list L' that contains only those
// entries from L that have the same top-level signature as P.
// P and Q have the same top-level signature iff:
// - P is a single metavariable, meaning it could match anything, or
// - P is a compound expression whose operator and number of operands match
//   those of Q
const filterBySignature = ( P, L ) => {
    // a single metavariable matches anything
    if ( P.isAtomic() ) return L
    // filter first by number of children
    L = L.filter( entry => entry.numChildren() == P.numChildren() )
    // filter next by operator, unless that operator is a metavariable
    const operator = P.firstChild()
    if ( !operator.isA( Matching.metavariable ) )
        L = L.filter( entry => entry.firstChild().equals( operator ) )
    return L
}

/**
 * Given a sequent and a formula, is there an instantiation of the formula that,
 * if added as another premise to the sequent, would make the sequent true?  The
 * answer to that question depends upon which deductive system is providing the
 * meaning of "true" for sequents, but in any reasonable case, finding exactly
 * the set of instantiations that would make a sequent true will typically be at
 * least as difficult as validating the instantiated sequent, perhaps moreso.
 * Consequently, this function does not attempt to find the exact correct answer
 * to that question, but rather finds a superset of the answer, guaranteeing
 * that any instantiation that would make the sequent hold will be among the
 * results.  Those results can be filtered further, if desired, by the client,
 * by running them through the validation algorithm for the deductive system in
 * play.
 * 
 * The default is to search for instantiations that will make the sequent true
 * when validated by {@link ValidationTools.classicalPropositionalValidator
 * classical propositional logic}.  However, if the client will be using
 * {@link ValidationTools.intuitionisticPropositionalValidator intuitionistic
 * propositional logic} instead, the results can be filterted further; simply
 * set `intuitionistic: true` in the options object.  This will not only return
 * fewer results, but also speed up the search for those results.
 * 
 * The default is to search for instantiations that will make the sequent true
 * even if the formula itself is only an intermediate step in a larger chain of
 * inferences.  However, it is often the case that the client wants the formula
 * to be the final step that achieves the sequent's conclusion (say, if a
 * student should be expected to cite a formula directly relevant to the
 * statement they're justifying).  This will significantly narrow the search
 * space and the result set and will consequently speed up the search.  Simply
 * set `direct: true` in the options object.
 * 
 * The default is to do the work silently, not generating any debugging output.
 * But if debugging a complex problem, it may help to see the inner workings of
 * this function.  Set `debug: true` in the options object to print copious
 * debugging output to the console.
 * 
 * This function is a generator that yields a sequence of objects in the same
 * format as those returned by {@link module:Matching.allInstantiations
 * allInstantiations()}; see its documentation for details.
 * 
 * @param {Sequent} sequent the sequent whose conclusion the client hopes to
 *   justify by instantiating the formula
 * @param {Formula} formula the formula whose possible instantiations are to be
 *   explored
 * @param {Object} options a dictionary of options, which default to
 *   `{ direct: false, intuitionistic: false, debug: false }` and whose meaning
 *   is given above
 * @alias Formula.possibleSufficientInstantiations
 */
function *possibleSufficientInstantiations (
    sequent, formula, options = { }
) {
    // Assign default options
    options = Object.assign( {
        direct : false, intuitionistic : false, debug : false
    }, options )
    if ( options.debug ) {
        console.log( 'Sequent: ' + sequent.toPutdown() )
        console.log( 'Formula: ' + formula.toPutdown() )
    }
    // Compute and classify the outermost expressions in the sequent.
    const sequentOEs = classifyByParity( sequent )
    // Now view the formula as a set of formulas, one for each of its
    // conclusions.  The conditionalForm() function is ideal for this.
    for ( let innerFormula of formula.conditionalForm() ) {

        // Compute outermost expres in the formula; classifying not used here.
        const classified = classifyByParity( innerFormula )
        let patterns = classified.both.slice()
        patterns.unshift( patterns.pop() )
        // Candidates to match with each are all outermost expressions of the
        // sequent, so we make many copies of that for use below.
        let candidates = Array( patterns.length ).fill( sequentOEs.both )

        // Now process the options object.
        let numRequired = 0
        if ( options.direct ) {
            // If direct = true, then the final conclusion of the formula must
            // match the final conclusion of the sequent, so we can simplify:
            candidates[0] = [ sequentOEs.both.last() ]
            numRequired = 1
        } else if ( options.intuitionistic ) {
            // If direct = false, but intuitionistics = true, the formula
            // conclusion must still match something in positive position.
            candidates[0] = sequentOEs.positives
            numRequired = 1
        }
        // If intuitionistics = true, we can also require any formulaOE that is
        // the last child of a top-level premise to match a negative sequentOE.
        if ( options.intuitionistic ) {
            const isLastChildOfTopLevelPremise = x => x.parent() &amp;&amp; ( (
                // either :{ ... x } is a child of the innerFormula but not the last:
                x == x.parent().lastChild()
             &amp;&amp; x.parent().parent() == innerFormula
             &amp;&amp; x.parent() != innerFormula.lastChild()
            ) || (
                // or :x is a child of the innerFormula but not the last:
                x.parent() == innerFormula
             &amp;&amp; x != innerFormula.lastChild()
            ) )
            const toMatchNegatives = patterns.slice( 1 ).filter(
                x => isLastChildOfTopLevelPremise( x.original ) )
            const toMatchAnything = patterns.slice( 1 ).filter(
                x => !isLastChildOfTopLevelPremise( x.original ) )
            patterns = [ patterns[0], ...toMatchNegatives, ...toMatchAnything ]
            candidates = [ candidates[0],
                ...Array( toMatchNegatives.length ).fill( sequentOEs.negatives ),
                ...Array( toMatchAnything.length ).fill( sequentOEs.both ) ]
            numRequired = 1 + toMatchNegatives.length
        }

        if ( options.debug ) {
            console.log( `Calling Matching w/j=${numRequired} and:` )
            for ( let i = 0 ; i &lt; patterns.length ; i++ ) {
                console.log( 'Pair '+i+':' )
                console.log( patterns[i].toPutdown() )
                for ( let j = 0 ; j &lt; candidates[i].length ; j++ )
                    console.log( '\t' + candidates[i][j].toPutdown() )
            }
        }

        // Now yield all instantiations for this innerFormula
        // But fix their expression indices to match the tree order, because
        // the way we've permuted them will not make sense to the caller.
        const origPatternIndex = pattern => classified.both.indexOf( pattern )
        const unpermute = anyArray => {
            const result = Array( anyArray ).fill( 0 )
            for ( let i = 0 ; i &lt; anyArray.length ; i++ )
                result[origPatternIndex( patterns[i] )] = anyArray[i]
            return result
        }
        // Make the optional multi-matching problem we're about to run as
        // efficient as possible, by removing duplicate candidates, combining
        // constraints where possible, and applying signature filtering.
        candidates = candidates.map( duplicateLCsRemoved )
        numRequired = removeDuplicatePatterns(
            patterns, candidates, numRequired )
        for ( let i = 0 ; i &lt; patterns.length ; i++ )
            candidates[i] = filterBySignature( patterns[i], candidates[i] )
        // Now prepare to run the optional multi-matching algorithm.
        if ( options.debug ) {
            console.log( 'Patterns:   [ '
                       + patterns.map( x => x.toPutdown() ).join( ', ' ) + ' ]' )
            console.log( 'Candidates: [ '
                       + candidates.map( x => '[ '
                       + x.map( y => y.toPutdown() ).join( ', ' ) + ' ]' ) + ' ]' )
            console.log( 'Classified: [ '
                       + classified.both.map( x => x.toPutdown() ).join( ', ' )
                       + ' ]' )
            console.log( 'sequentOEs: [ '
                       + sequentOEs.both.map( x => x.toPutdown() ).join( ', ' )
                       + ' ]' )
        }
        const generator = Matching.allOptionalInstantiations(
            patterns, candidates, numRequired )
        // Before returning its results, convert the expression indices back to
        // ones the client will expect, since we have permuted the client's
        // inputs as needed for matching purposes.
        for ( let solObj of generator ) {
            if ( options.debug )
                console.log( 'Before: '
                           + JSON.stringify( solObj.expressionIndices ) + ' '
                           + solObj.solution.toString() )
            solObj.expressionIndices =
                solObj.expressionIndices.map(
                    ( exprInd, patInd ) => sequentOEs.both.findIndex(
                        x => candidates[patInd][exprInd]
                          &amp;&amp; x.original == candidates[patInd][exprInd].original ) )
            if ( options.debug )
                console.log( 'Half:   '
                           + JSON.stringify( solObj.expressionIndices ) + ' '
                           + solObj.solution.toString() )
            solObj.expressionIndices = unpermute(
                solObj.expressionIndices )
            if ( options.debug )
                console.log( 'After:  '
                           + JSON.stringify( solObj.expressionIndices ) + ' '
                           + solObj.solution.toString() )
            yield solObj
        }
    }
}

export default {
    from, domain, instantiate,
    allPossibleInstantiations, possibleSufficientInstantiations,
    cachedInstantiation, addCachedInstantiation,
    allCachedInstantiations, clearCachedInstantiations,
    hasDeclarationCapture
}
</code></pre>
    </article>
</section>




  </div>
</main>

<footer class="layout-footer">
  <div class="container">
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.3</a>
  </div>
</footer>



<script src="scripts/prism.dev.js"></script>
</body>
</html>
